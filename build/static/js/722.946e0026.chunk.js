"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[722],{6722:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(9096),r=t(2506),n=t(9389),l=t(3272),i=t(1088),o=t(9367),c=t(2791),d=t(501),u=t(3704),x=t(7804),p=t(9323),f=t(5772),h=t(6641),m=t(8186),j=t(6579),b=t(699),k=t(184);const y=()=>{const[e,s]=(0,c.useState)([0,0]),[t,y]=a.ZP.useNotification(),{userId:g}=(0,j.C)((e=>e.login.doth)),w=(0,f.s0)(),C=(0,c.useRef)(""),N=(0,c.useRef)(),v=(0,c.useRef)(),Z=(0,c.useRef)(),[z,S]=(0,c.useState)(!1),[A,T]=(0,c.useState)((0,f.f_)()),[R,_]=(0,c.useState)(!1);(0,c.useEffect)((()=>{console.log(A)}),[]);function K(e){let s=0;for(let t of e)s=(0,b.rt)(t)?s+1:s;return s>=e.length/2}const[P,E]=(0,c.useState)(0),F=(t,a)=>{C.current=t;let r=[];switch(a){case 1:r=A.map((a=>(a.onlyKey==t&&e[0]<10&&(a.like++,e[0]++,s([...e])),a)));break;case 2:r=A.map((a=>(a.onlyKey==t&&e[1]<10&&(a.dislike++,e[1]++,s([...e])),a)))}T(r)};(0,c.useEffect)((()=>{(0,m.et)(C.current,A).then((e=>e.result))}),[A]);const I=e=>{};return(0,k.jsxs)(c.Fragment,{children:[y,(0,k.jsxs)(r.Z,{afterClose:()=>{S(!1)},className:"",confirmLoading:z,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4\u8f93\u5165",okType:"danger",title:(0,k.jsx)("span",{className:"text-zinc-600",children:"\u5199\u5165\u4f60\u7684\u5185\u5bb9"}),open:R,onOk:async()=>{const{current:{input:{value:e}}}=N,{current:{resizableTextArea:{textArea:{value:s}}}}=v,{current:{resizableTextArea:{textArea:{value:a}}}}=Z;if(""==e||""==a)t.open({message:"\u6807\u9898\u6216\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01"});else if(K(e)&&K(a)&&K(s)){S(!0);const t=await(0,m.Xm)({userId:g,topic:e,description:s,content:a});if(200==t.statusCode){const e=await fetch(t.result.path).then((e=>e.json()));T(e),await new Promise(((e,s)=>{setTimeout((()=>{S(!1),_(!1)}),1e3)}))}}else t.error({message:"\u4f60\u73b0\u5728\u5728\u4e71\u8f93\u5185\u5bb9\uff01\uff01\uff01"})},onCancel:()=>{_(!1)},children:[(0,k.jsx)(n.Z,{className:"border-0   f-0 rounded-none border-b border-b-purple-300 ",ref:N,onChange:I,placeholder:"\u8f93\u5165\u6807\u9898"}),(0,k.jsx)("br",{}),(0,k.jsx)(h.Z,{ref:v,onChange:I,autoSize:!0,showCount:!0,className:"border-0 line f-0 rounded-none border-b border-b-purple-300 text-gray-400",placeholder:"\u8f93\u5165\u63cf\u8ff0\u4fe1\u606f"}),(0,k.jsx)(h.Z,{ref:Z,onChange:I,autoSize:{minRows:5},showCount:!0,className:"border-0 line f-0 rounded-none border-b border-b-purple-300 text-gray-400",placeholder:"\u8f93\u5165\u5185\u5bb9"})]}),(0,k.jsxs)("div",{children:[g&&(0,k.jsx)(l.Z,{onClick:()=>{_(!0)},badge:{count:0==P?null:P},icon:(0,k.jsx)(d.Z,{}),type:"primary",className:"top-[100px] right-[24px]"}),(0,k.jsx)("div",{className:"flex flex-row",children:(0,k.jsx)("div",{className:"pt-[10px] flex flex-row flex-wrap  noSelect justify-start",children:A.map(((e,s)=>(0,k.jsx)(i.default,{hoverable:!0,className:"min-w-[250px] w-[300px] m-[10px]",cover:(0,k.jsx)("img",{onClick:()=>{w("/detail/introduce",{state:{item:e}})},alt:"example",src:e.descriptionPath}),actions:[(0,k.jsxs)("div",{className:"select-none",children:[(0,k.jsx)(u.Z,{onClick:()=>F(e.onlyKey,2)},"setting"),(0,k.jsx)("span",{className:"text-yellow-800 size-12",children:e.dislike>0?e.dislike:null})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(x.Z,{onClick:()=>F(e.onlyKey,1)},"edit"),(0,k.jsx)("span",{className:"text-yellow-800 size-12",children:e.like>0?e.like:null})]})],children:(0,k.jsxs)("div",{onClick:()=>{w("/detail/introduce",{state:{item:e}})},children:[(0,k.jsx)(p.Z,{className:"max-w-[250px]",avatar:(0,k.jsx)(o.C,{src:e.avatarPath}),title:e.title,description:e.description}),(0,k.jsx)("br",{}),(0,k.jsx)("span",{className:"float-left",children:"\u4f5c\u8005:"+e.author}),(0,k.jsx)("span",{className:"float-right",children:"\u53d1\u5e03\u65f6\u95f4:"+e.publicDate})]})},s)))})})]})]})}},699:(e,s,t)=>{t.d(s,{p7:()=>r,rt:()=>a});function a(e){return!/[^\u4E00-\u9FA5]/.test(e)}function r(e){return!/^[A-Za-z0-9]+$/.test(e)}}}]);
//# sourceMappingURL=722.946e0026.chunk.js.map