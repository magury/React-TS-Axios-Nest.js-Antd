{"version":3,"file":"static/js/650.669146d3.chunk.js","mappings":"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","sources":["components/登录/index.tsx","utility/constant.ts"],"sourcesContent":["import React, {Fragment, useEffect, useRef, useState} from \"react\";\r\nimport {\r\n    Button,\r\n    ButtonProps,\r\n    Card,\r\n    Checkbox,\r\n    CheckboxProps,\r\n    Form,\r\n    Input,\r\n    InputRef,\r\n    notification,\r\n    Select,\r\n    Space,\r\n} from \"antd\";\r\nimport {getLogin, getRegister} from \"@/utility/http\";\r\nimport {useLoaderData, useNavigate} from \"react-router-dom\";\r\nimport {setStatus} from \"@/features/login/loginSlice\";\r\nimport {useAppDispatch} from \"@/store/hooks\";\r\nimport {CheckboxChangeEvent} from \"antd/es/checkbox\";\r\nimport classNames from \"classnames\";\r\nimport {FrownOutlined} from \"@ant-design/icons\";\r\nimport {isCount} from \"@/utility/constant\";\r\nimport {login} from \"@/utility/new.type\";\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nconst App: React.FC = () => {\r\n    let loader = useLoaderData() as login.loader;\r\n    const [provinces, setProvince] = useState<login.provinces>(\r\n        loader.map((item) => ({\r\n            label: item.hospitalName,\r\n            value: item.hospitalId,\r\n        })) || []\r\n    );\r\n    const [agree, setAgree] = useState<boolean>(false);\r\n    const [api, contextHolder] = notification.useNotification();\r\n    const dispatch = useAppDispatch();\r\n    // 导航\r\n    const navigate = useNavigate();\r\n    const user = useRef<HTMLInputElement>(null);\r\n    const password = useRef<HTMLInputElement>(null);\r\n    /**\r\n     *\r\n     * @description 登录\r\n     */\r\n    const onChange: CheckboxProps[\"onChange\"] = (e: CheckboxChangeEvent) => {\r\n    };\r\n    const blunder = (description: string) => {\r\n        api.open({\r\n            message: \"操作错误\",\r\n            description,\r\n            icon: <FrownOutlined style={{color: \"#108ee9\"}}/>,\r\n            placement: \"topLeft\",\r\n        });\r\n    };\r\n    const finish = async (value: login.finish) => {\r\n        if (!agree) return blunder(\"需要先同意并遵守服务协议\");\r\n        const {username, password, hospital} = value;\r\n        if (!username || !password || !hospital) {\r\n            return api.open({\r\n                message: \"您可能输入了错误的登录信息，请检查是否正确\",\r\n            });\r\n        }\r\n        if (username.length < 8 && password.length < 8)\r\n            return blunder(\"账号或者密码长度不能小于8位\");\r\n        for (let str of username)\r\n            if (isCount(str)) return blunder(\"账号输入规则只能是字母和数字\");\r\n        const res = await getLogin(value);\r\n        if (res.statusCode == 200) {\r\n            dispatch(setStatus({username, password}));\r\n            dispatch(setStatus(res.result));\r\n            navigate(\"/patient\");\r\n        } else {\r\n            blunder(\"账号或密码错误！\");\r\n        }\r\n\r\n    };\r\n    return (\r\n        <Fragment>\r\n            {contextHolder}\r\n            <div\r\n                className={\r\n                    \"min-h-screen bg-gray-100 text-gray-900 flex justify-center dlbox\"\r\n                }\r\n            >\r\n                <div className=\"max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1\">\r\n                    <div className=\" lg:w-1/2 xl:w-5/12 p-6 sm:p-12\">\r\n                        <div className=\"mt-12 flex flex-col items-center\">\r\n                            <h1 className=\"text-2xl xl:text-3xl font-extrabold\">用户登录</h1>\r\n                            <div className=\"w-full flex-1 mt-8\">\r\n                                <div className=\"flex flex-col items-center\">\r\n                                    <button\r\n                                        className=\"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline\">\r\n                                        <div className=\"weixin\"></div>\r\n                                        <span className=\"ml-4\">使用微信登录</span>\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\">\r\n                                        <div className=\"weibo\"></div>\r\n                                        <span className=\"ml-4\">使用微博登录</span>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"my-12 border-b text-center\">\r\n                                    <div\r\n                                        className=\"leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2\">\r\n                                        或者使用已有账号登录\r\n                                    </div>\r\n                                </div>\r\n                                <Form onFinish={finish}>\r\n                                    <div className=\"mx-auto max-w-xs\">\r\n                                        <Form.Item\r\n                                            initialValue={\"\"}\r\n                                            name=\"username\"\r\n                                            className={\"mb-0\"}\r\n                                        >\r\n                                            <input\r\n                                                disabled={!agree}\r\n                                                id={\"username\"}\r\n                                                ref={user}\r\n                                                className={classNames(\r\n                                                    \"w-full px-8 py-4 rounded-lg font-medium border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white\",\r\n                                                    {\r\n                                                        \"bg-zinc-300\": !agree,\r\n                                                    }\r\n                                                )}\r\n                                                type=\"text\"\r\n                                                placeholder=\"内部账号\"\r\n                                            />\r\n                                        </Form.Item>\r\n                                        <Form.Item\r\n                                            initialValue={\"\"}\r\n                                            name=\"password\"\r\n                                            className={\"mb-0\"}\r\n                                        >\r\n                                            <input\r\n                                                autoComplete=\"off\"\r\n                                                disabled={!agree}\r\n                                                id={\"password\"}\r\n                                                ref={password}\r\n                                                className={classNames(\r\n                                                    \"w-full px-8 py-4 rounded-lg font-medium  border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5\",\r\n                                                    {\r\n                                                        \"bg-zinc-300\": !agree,\r\n                                                    }\r\n                                                )}\r\n                                                type=\"password\"\r\n                                                placeholder=\"密码\"\r\n                                            />\r\n                                        </Form.Item>\r\n                                        <Form.Item name=\"hospital\" className={\"mb-0\"}>\r\n                                            <Select\r\n                                                placeholder=\"来自医院\"\r\n                                                disabled={!agree}\r\n                                                labelInValue\r\n                                                className={classNames(\" mt-[16px] w-full font-medium \")}\r\n                                                options={provinces}\r\n                                            />\r\n                                        </Form.Item>\r\n                                        <Form.Item>\r\n                                            <button\r\n                                                className=\"mt-5 tracking-wide font-semibold bg-indigo-500 text-gray-100 w-full py-4 rounded-lg hover:bg-indigo-700 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none\">\r\n                                                <span className=\"ml-3\">登 录</span>\r\n                                            </button>\r\n                                        </Form.Item>\r\n                                        <section>\r\n                                            <p className=\"mt-6 text-xl text-gray-600 text-center flex flex-row justify-center items-center\">\r\n                                                <Checkbox\r\n                                                    onClick={() => setAgree(!agree)}\r\n                                                    className={\" mr-[10px]\"}\r\n                                                    onChange={onChange}\r\n                                                />\r\n                                                <span className={\"h-fit\"}>我同意并遵守服务协议</span>\r\n                                            </p>\r\n                                        </section>\r\n                                    </div>\r\n                                </Form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex-1 bg-indigo-100 hidden text-center lg:flex\">\r\n                        <div className=\"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat bg-svg\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","export const METHOD_POST = \"post\";\r\n\r\nexport function isChinese(value: string) {\r\n    const re = /[^\\u4E00-\\u9FA5]/;\r\n    return !re.test(value);\r\n\r\n}\r\n\r\nexport function isCount(value: string) {\r\n    const re = /^[A-Za-z0-9]+$/\r\n    return !re.test(value)\r\n}\r\nexport const port=3011\r\n\r\n\r\n"],"names":["require","App","loader","useLoaderData","provinces","setProvince","useState","map","item","label","hospitalName","value","hospitalId","agree","setAgree","api","contextHolder","notification","useNotification","dispatch","useAppDispatch","navigate","useNavigate","user","useRef","password","blunder","description","open","message","icon","_jsx","FrownOutlined","style","color","placement","_jsxs","Fragment","children","className","Form","onFinish","async","username","hospital","length","str","isCount","res","getLogin","statusCode","setStatus","result","Item","initialValue","name","disabled","id","ref","classNames","type","placeholder","autoComplete","Select","labelInValue","options","Checkbox","onClick","onChange","e","isChinese","test"],"sourceRoot":""}